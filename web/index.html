<!doctype html>
<html>
<head>
	<title>Space Pirates!!!</title>

	<link rel="stylesheet" href="style.css">
</head>
<body>
	<header>
		<h1>Space Pirates!</h1>
	</header>
	<div id="content">
		<canvas width="640" height="360" id="gameCanvas" background="#fff" tabindex="1"></canvas>
		<p id="msg"></p>
		<p id="fps"></p>
	</div>
	<footer>
		Space Pirates! &copy; 2013, Alex Roberts
	</footer>

	<script type="text/javascript" src="lib/jquery-1.9.0.js"></script>
	<script type="text/javascript" src="lib/underscore.js"></script>
	<script type="text/javascript" src="lib/backbone.js"></script>
	<script type="text/javascript" src="lib/math.js"></script>

	<script src="src/base.js" type="text/javascript"></script>

	<script type="text/javascript">
		$(function() {
			var game = new Engine({ el: '#gameCanvas' });
			window.game = game;

			var scene = new Scene({ name: 'test1', w: game.width(), h: game.height() });
			game.scenes.add(scene);

			scene.load(function() {
				for (var j = 0; j < 10; j++) {
					for (var i  = 0; i < 20; i++) {
						var entity = new Entity({
							position: new Vector2(1, i * 20),
							w: Math.random() * 150 + 50,
							h: 10,
							fillStyle: 'rgb(' + 12 * i + ', 96, 96)',
							speed: Math.random() * 175 + 25
						});

						this.children.add(entity);
					}
				}
			});

			var scene2 = new Scene({ name: 'test2', w: game.width(), h: game.height() });
			game.scenes.add(scene2);

			scene2.load(function() {
				var entity = new GameObject({
					position: new Vector2(this.width() / 2, this.height() / 2),
					w: 20,
					h: 20
				});
				entity.components.add([
					new MoveComponent(),
					new RotationComponent()
				]);
				this.children.add(entity);
			});

			game.setActiveScene('test2');
			game.render();
		});
	</script>

</body>
</html>
